\doxysection{server\+\_\+packets.\+c File Reference}
\hypertarget{server__packets_8c}{}\label{server__packets_8c}\index{server\_packets.c@{server\_packets.c}}
{\ttfamily \#include $<$enet/enet.\+h$>$}\newline
{\ttfamily \#include $<$sqlite3.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include "{}base64.\+h"{}}\newline
{\ttfamily \#include "{}guid.\+h"{}}\newline
{\ttfamily \#include "{}json.\+h"{}}\newline
{\ttfamily \#include "{}jsonres.\+h"{}}\newline
{\ttfamily \#include "{}murk.\+h"{}}\newline
{\ttfamily \#include "{}server\+\_\+sql.\+h"{}}\newline
{\ttfamily \#include "{}server.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{server__packets_8c_a6ab1e722b9b8ed89a07dfe84b6b23570}\label{server__packets_8c_a6ab1e722b9b8ed89a07dfe84b6b23570} 
\mbox{\hyperlink{murk_8h_a40ffc6559626c06df42676cd5f3be6a3}{Process\+Action}} {\bfseries Process\+Packet\+Action} (const char \texorpdfstring{$\ast$}{*}pkt, size\+\_\+t len, ENet\+Peer \texorpdfstring{$\ast$}{*}peer)
\begin{DoxyCompactList}\small\item\em Performs secondary processing of packet action. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{server__packets_8c_a5bc36bb63cbba0dd5853283e283f0603}{Process\+Packet}} (const char \texorpdfstring{$\ast$}{*}pkt, size\+\_\+t len, ENet\+Peer \texorpdfstring{$\ast$}{*}peer)
\begin{DoxyCompactList}\small\item\em The primary packet processing function. \end{DoxyCompactList}\item 
\Hypertarget{server__packets_8c_a1d3fdf16ed3c9521b8151b42e2135d00}\label{server__packets_8c_a1d3fdf16ed3c9521b8151b42e2135d00} 
void {\bfseries Process\+Menu} (ENet\+Peer \texorpdfstring{$\ast$}{*}peer, \mbox{\hyperlink{murk_8h_a073591a64c3c883b9bd2cdaded5e2276}{Screen}} \texorpdfstring{$\ast$}{*}menu, char s)
\begin{DoxyCompactList}\small\item\em Proffers a menu to the peer and processes their selection when it comes back. \end{DoxyCompactList}\item 
\Hypertarget{server__packets_8c_ab09354fa28535e041149ad3a76d58eee}\label{server__packets_8c_ab09354fa28535e041149ad3a76d58eee} 
void {\bfseries Send\+Message\+Packet} (const char \texorpdfstring{$\ast$}{*}msg, ENet\+Peer \texorpdfstring{$\ast$}{*}peer)
\begin{DoxyCompactList}\small\item\em Sends a message to a single peer. Messages have no callback or reply needed, just messages. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{server__packets_8c_ad31b326a04e068d0ce17cc3e1b8ee8ce}\label{server__packets_8c_ad31b326a04e068d0ce17cc3e1b8ee8ce} 
\mbox{\hyperlink{structlogin}{s\+\_\+login}} {\bfseries user}
\item 
\Hypertarget{server__packets_8c_ad7fe4f83688c05464bcfc3f7a3cea539}\label{server__packets_8c_ad7fe4f83688c05464bcfc3f7a3cea539} 
size\+\_\+t {\bfseries last\+\_\+buffer\+\_\+size} = 0
\item 
\Hypertarget{server__packets_8c_ac072ff7d8750d9c5bab0bba803f3d0f1}\label{server__packets_8c_ac072ff7d8750d9c5bab0bba803f3d0f1} 
const int {\bfseries PLAYERS\+\_\+\+MAX}
\item 
\Hypertarget{server__packets_8c_aee4033e8a7813739e4181c7d4767dc81}\label{server__packets_8c_aee4033e8a7813739e4181c7d4767dc81} 
const \mbox{\hyperlink{murk_8h_a073591a64c3c883b9bd2cdaded5e2276}{Screen}} {\bfseries scr\+Main\+Menu}
\item 
\Hypertarget{server__packets_8c_abefaa1f61454b024734ad91b78d485a9}\label{server__packets_8c_abefaa1f61454b024734ad91b78d485a9} 
\mbox{\hyperlink{murk_8h_a805371713f5eb14e064b8d2ce95388d9}{User\+State}} \texorpdfstring{$\ast$}{*} {\bfseries active\+Player\+Database}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Packet processing code for the server. 

\doxysubsection{Function Documentation}
\Hypertarget{server__packets_8c_a5bc36bb63cbba0dd5853283e283f0603}\label{server__packets_8c_a5bc36bb63cbba0dd5853283e283f0603} 
\index{server\_packets.c@{server\_packets.c}!ProcessPacket@{ProcessPacket}}
\index{ProcessPacket@{ProcessPacket}!server\_packets.c@{server\_packets.c}}
\doxysubsubsection{\texorpdfstring{ProcessPacket()}{ProcessPacket()}}
{\footnotesize\ttfamily void Process\+Packet (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{pkt,  }\item[{size\+\_\+t}]{len,  }\item[{ENet\+Peer \texorpdfstring{$\ast$}{*}}]{peer }\end{DoxyParamCaption})}



The primary packet processing function. 

Normal packet processing loop for the server.

Sorts through all packet data, stores in a struct, and then executes any remaining commands if necessary. 
\begin{DoxyParams}{Parameters}
{\em pkt} & The raw contents of the packet. \\
\hline
{\em len} & The length of the packet. \\
\hline
{\em peer} & Pointer to the peer that sent the packet. \\
\hline
\end{DoxyParams}
